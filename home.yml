
  # =======================
  # HOME PAGE
  # =======================
  - name: Home

    #  https://github.com/glanceapp/glance/blob/main/docs/configuration.md#pages--columns
    head-widgets:

      # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#markets
      #    - type: markets
      #      markets:
      #        - symbol: SPY
      #          name: S&P 500
      #        - symbol: BTC-USD
      #          name: Bitcoin
      #          chart-link: https://www.tradingview.com/chart/?symbol=INDEX:BTCUSD
      #        - symbol: NVDA
      #          name: NVIDIA
      #        - symbol: AAPL
      #          symbol-link: https://www.google.com/search?tbm=nws&q=apple
      #          name: Apple         

    columns:

      # -----------------------
      # SMALL COLUMN
      # -----------------------
      - size: small
        widgets:

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#server-stats
          - type: server-stats
            servers:
            - type: local
              name: Tank
              hide-mountpoints-by-default: true
              mountpoints:
                "/mnt/disk1":
                  hide: false
                "/mnt/disk2":
                  hide: false
                "/mnt/disk3":
                  hide: false
                "/mnt/cache_ssd":
                  hide: false
                "/mnt/temp_ssd":
                  hide: false 

            # https://github.com/glanceapp/community-widgets/blob/main/widgets/time-bar/README.md
          - type: group
            widgets:
              - type: custom-api
                title: Day
                body-type: string
                skip-json-validation: true
                cache: 1s
                template: |
                  {{ $localTime := now }}
                  {{ $secondsPerDay := 86400 }}
                  {{ $elapsedSeconds := add (mul $localTime.Hour 3600) (mul $localTime.Minute 60) | add $localTime.Second }}
                  {{ $dayProgress := div (mul $elapsedSeconds 100.0) $secondsPerDay }}

                  {{ $gradient := "" }}
                  {{ if lt $dayProgress 10.0 }}
                    {{ $gradient = "#70a1ff" }}
                  {{ else if lt $dayProgress 25.0 }}
                    {{ $gradient = "#ff6b6b, #70a1ff" }}
                  {{ else if lt $dayProgress 50.0 }}
                    {{ $gradient = "#ff6b6b, #f8e71c, #7ed6df" }}
                  {{ else }}
                    {{ $gradient = "#ff6b6b, #f8e71c, #7ed6df, #70a1ff" }}
                  {{ end }}

                  <div style="font-family: sans-serif; text-align: center;">
                    <div style="width: 100%; height: 12px; background: #23262F; border:1px solid gray; border-radius: 10px; overflow: hidden;">
                      <div style="
                        height: 100%;
                        width: {{ $dayProgress }}%;
                        background: linear-gradient(90deg, {{ $gradient }});
                      "></div>
                    </div>
                    <div class="size-h1" style="margin-top: 6px;">{{ printf "%.2f" $dayProgress }}% of the day has passed</div>
                  </div>           

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#calendar
          - type: calendar
            hide-header: true
            first-day-of-week: monday


      # -----------------------
      # FULL COLUMN
      # -----------------------
      - size: full
        widgets:

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#monitor
          - type: monitor
            cache: 1m
            title: Arr Services
            sites:
              - title: Plex
                url: https://plex.threebros.org
                check-url: https://plex.threebros.org/identity
                icon: sh:plex
              - title: Sonarr
                url: https://tv.threebros.org
                check-url: http://192.168.68.77:8989
                icon: sh:sonarr
              - title: Radarr
                url: https://tv.threebros.org
                check-url: http://192.168.68.77:7878
                icon: sh:radarr
              - title: Prowlarr
                url: https://prowlarr.threebros.org
                check-url: http://192.168.68.77:9696
                icon: sh:prowlarr
              - title: Scraparr
                url: http://192.168.68.77:9014/metrics
                icon: sh:scraparr
              - title: Flaresolverr
                url: http://192.168.68.77:9021
                icon: sh:flaresolverr
              - title: Ombi
                url: https://request.threebros.org
                icon: sh:ombi

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#monitor
          - type: monitor
            cache: 1m
            title: Tank Services
            sites:
              - title: Authelia
                url: https://auth.threebros.org
                icon: sh:authelia
                timeout: 3s
              - title: Authelia-lldap
                url: http://192.168.68.77:9001
                icon: sh:lldap
              - title: Code Server
                url: http://192.168.68.77:9018
                icon: sh:visual-studio-code
              - title: Glance
                url: https://home.threebros.org
                check-url: http://192.168.68.77:9023
                icon: sh:glance
              - title: Grafana
                url: https://grafana.threebros.org
                check-url: http://192.168.68.77:9004
                icon: sh:grafana
              - title: InfluxDB
                url: http://192.168.68.77:9020
                icon: sh:influxdb
              - title: Nginx Proxy Manager
                url: http://192.168.68.77:7818/
                icon: sh:nginx-proxy-manager
              - title: qBittorrent
                url: https://qbit.threebros.org
                check-url: http://192.168.68.77:8080/
                icon: sh:qbittorrent
              - title: Resilio Sync
                url: https://sync.threebros.org
                check-url: http://192.168.68.77:8888
                icon: sh:resilio-sync
                alt-status-codes:
                  - 401
              - title: Speedtest Tracker
                url: https://speed.threebros.org
                check-url: http://192.168.68.77:9024
                icon: sh:speedtest-tracker
              - title: Tautulli
                url: https://tautulli.threebros.org
                check-url: http://192.168.68.77:8181
                icon: sh:tautulli
              - title: Transmission
                url: https://trans.threebros.org
                check-url: http://192.168.68.77:9002
                icon: sh:transmission
                alt-status-codes:
                  - 401

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#rss
          
          - type: group
            widgets:
              - type: rss
                title: Bloomberg
                limit: 15
                collapse-after: 6
                cache: 6h
                feeds:
                  - url: https://feeds.bloomberg.com/markets/news.rss
                    title: Bloomberg

              - type: rss
                title: Fox Business
                limit: 15
                collapse-after: 6
                cache: 6h
                feeds:
                  - url: https://moxie.foxbusiness.com/google-publisher/markets.xml
                    title: Fox Business


          # https://github.com/glanceapp/community-widgets/blob/main/widgets/google-calendar-list/README.md

          #- type: custom-api
          #  title: Upcoming Google Calendar Events
          #  cache: 15m
          #  template: 

      # -----------------------
      # SMALL COLUMN
      # -----------------------
      - size: small
        widgets:

          # https://github.com/glanceapp/community-widgets/blob/main/widgets/speedtest-tracker/README.md
          - type: custom-api
            cache: 1h
            title: Internet Speed
            title-url: ${SPEEDTEST_URL}
            url: ${SPEEDTEST_URL}/api/v1/results/latest
            headers:
              Authorization: Bearer ${SPEEDTEST_TRACKER_API_TOKEN}
              Accept: application/json
            subrequests:
              stats:
                url: ${SPEEDTEST_URL}/api/v1/stats
                headers:
                  Authorization: Bearer ${SPEEDTEST_TRACKER_API_TOKEN}
                  Accept: application/json
            options:
              showPercentageDiff: true
            template: |
              {{ $showPercentage := .Options.BoolOr "showPercentageDiff" true }}

              {{ $stats := .Subrequest "stats" }}
              <div class="flex justify-between text-center margin-block-3">
              <div>
                  {{ $downloadChange := percentChange ($stats.JSON.Float "data.download.avg_bits") (.JSON.Float "data.download_bits")
                  }}
                  {{ if $showPercentage }}
                  <div
                  class="size-small {{ if gt $downloadChange 0.0 }}color-positive{{ else if lt $downloadChange 0.0 }}color-negative{{ else }}color-primary{{ end }}"
                  style="display: inline-flex; align-items: center;">
                  {{ $downloadChange | printf "%+.1f%%" }}
                  {{ if gt $downloadChange 0.0 }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                      style="height: 1em; margin-left: 0.25em;" class="size-4">
                      <path fill-rule="evenodd"
                      d="M9.808 4.057a.75.75 0 0 1 .92-.527l3.116.849a.75.75 0 0 1 .528.915l-.823 3.121a.75.75 0 0 1-1.45-.382l.337-1.281a23.484 23.484 0 0 0-3.609 3.056.75.75 0 0 1-1.07.01L6 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.061l4.25-4.25a.75.75 0 0 1 1.06 0l1.756 1.755a25.015 25.015 0 0 1 3.508-2.85l-1.46-.398a.75.75 0 0 1-.526-.92Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ else if lt $downloadChange 0.0 }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                      style="height: 1em; margin-left: 0.25em;" class="size-4">
                      <path fill-rule="evenodd"
                      d="M1.22 4.22a.75.75 0 0 1 1.06 0L6 7.94l2.761-2.762a.75.75 0 0 1 1.158.12 24.9 24.9 0 0 1 2.718 5.556l.729-1.261a.75.75 0 0 1 1.299.75l-1.591 2.755a.75.75 0 0 1-1.025.275l-2.756-1.591a.75.75 0 1 1 .75-1.3l1.097.634a23.417 23.417 0 0 0-1.984-4.211L6.53 9.53a.75.75 0 0 1-1.06 0L1.22 5.28a.75.75 0 0 1 0-1.06Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ end }}
                  </div>
                  {{ end }}
                  <div class="color-highlight size-h3">{{ .JSON.Float "data.download_bits" | mul 0.000001 | printf "%.1f" }}</div>
                  <div class="size-h6">DOWNLOAD</div>
              </div>
              <div>
                  {{ $uploadChange := percentChange ($stats.JSON.Float "data.upload.avg_bits") (.JSON.Float "data.upload_bits") }}
                  {{ if $showPercentage }}
                  <div
                  class="size-small {{ if gt $uploadChange 0.0 }}color-positive{{ else if lt $uploadChange 0.0 }}color-negative{{ else }}color-primary{{ end }}"
                  style="display: inline-flex; align-items: center;">
                  {{ $uploadChange | printf "%+.1f%%" }}
                  {{ if gt $uploadChange 0.0 }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                      style="height: 1em; margin-left: 0.25em;" class="size-4">
                      <path fill-rule="evenodd"
                      d="M9.808 4.057a.75.75 0 0 1 .92-.527l3.116.849a.75.75 0 0 1 .528.915l-.823 3.121a.75.75 0 0 1-1.45-.382l.337-1.281a23.484 23.484 0 0 0-3.609 3.056.75.75 0 0 1-1.07.01L6 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.061l4.25-4.25a.75.75 0 0 1 1.06 0l1.756 1.755a25.015 25.015 0 0 1 3.508-2.85l-1.46-.398a.75.75 0 0 1-.526-.92Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ else if lt $uploadChange 0.0 }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                      style="height: 1em; margin-left: 0.25em;" class="size-4">
                      <path fill-rule="evenodd"
                      d="M1.22 4.22a.75.75 0 0 1 1.06 0L6 7.94l2.761-2.762a.75.75 0 0 1 1.158.12 24.9 24.9 0 0 1 2.718 5.556l.729-1.261a.75.75 0 0 1 1.299.75l-1.591 2.755a.75.75 0 0 1-1.025.275l-2.756-1.591a.75.75 0 1 1 .75-1.3l1.097.634a23.417 23.417 0 0 0-1.984-4.211L6.53 9.53a.75.75 0 0 1-1.06 0L1.22 5.28a.75.75 0 0 1 0-1.06Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ end }}
                  </div>
                  {{ end }}
                  <div class="color-highlight size-h3">{{ .JSON.Float "data.upload_bits" | mul 0.000001 | printf "%.1f" }}</div>
                  <div class="size-h6">UPLOAD</div>
              </div>
              <div>
                  {{ $pingChange := percentChange ($stats.JSON.Float "data.ping.avg") (.JSON.Float "data.ping") }}
                  {{ if $showPercentage }}
                  <div
                  class="size-small {{ if gt $pingChange 0.0 }}color-negative{{ else if lt $pingChange 0.0 }}color-positive{{ else }}color-primary{{ end }}"
                  style="display: inline-flex; align-items: center;">
                  {{ $pingChange | printf "%+.1f%%" }}
                  {{ if lt $pingChange 0.0 }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                      style="height: 1em; margin-left: 0.25em;" class="size-4">
                      <path fill-rule="evenodd"
                      d="M1.22 4.22a.75.75 0 0 1 1.06 0L6 7.94l2.761-2.762a.75.75 0 0 1 1.158.12 24.9 24.9 0 0 1 2.718 5.556l.729-1.261a.75.75 0 0 1 1.299.75l-1.591 2.755a.75.75 0 0 1-1.025.275l-2.756-1.591a.75.75 0 1 1 .75-1.3l1.097.634a23.417 23.417 0 0 0-1.984-4.211L6.53 9.53a.75.75 0 0 1-1.06 0L1.22 5.28a.75.75 0 0 1 0-1.06Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ else if gt $pingChange 0.0 }}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                      style="height: 1em; margin-left: 0.25em;" class="size-4">
                      <path fill-rule="evenodd"
                      d="M9.808 4.057a.75.75 0 0 1 .92-.527l3.116.849a.75.75 0 0 1 .528.915l-.823 3.121a.75.75 0 0 1-1.45-.382l.337-1.281a23.484 23.484 0 0 0-3.609 3.056.75.75 0 0 1-1.07.01L6 8.06l-3.72 3.72a.75.75 0 1 1-1.06-1.061l4.25-4.25a.75.75 0 0 1 1.06 0l1.756 1.755a25.015 25.015 0 0 1 3.508-2.85l-1.46-.398a.75.75 0 0 1-.526-.92Z"
                      clip-rule="evenodd" />
                  </svg>
                  {{ end }}
                  </div>
                  {{ end }}
                  <div class="color-highlight size-h3">{{ .JSON.Float "data.ping" | printf "%.0f ms" }}</div>
                  <div class="size-h6">PING</div>
              </div>
              </div>

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#weather
          - type: weather
            units: metric
            hour-format: 12h
            location: London, United Kingdom

          # https://github.com/glanceapp/community-widgets/blob/main/widgets/nearby-aircraft/README.md
          #- type: custom-api
          #  title: Nearby Aircraft
          #  cache: 1m

          # https://github.com/glanceapp/community-widgets/blob/main/widgets/random-fact/README.md
          - type: custom-api
            hide-header: true
            title: Random Fact
            cache: 3h
            url: https://uselessfacts.jsph.pl/api/v2/facts/random
            template: |
              <p class="size-h4 color-paragraph">{{ .JSON.String "text" }}</p>


          # https://github.com/glanceapp/community-widgets/blob/main/widgets/should-i-deploy-today/README.md
          - type: custom-api
            hide-header: true
            title: Should I deploy today
            # cache: 1h
            url: https://shouldideploy.today/api?tz=Europe%2FAmsterdam
            method: GET
            template: |
              <div class="deploy-card {{ if .JSON.Bool "shouldideploy" }}deploy-yes{{ else }}deploy-no{{ end }}">
                <style>
                  .deploy-card {
                    width: 100%;
                    max-width: unset;
                    margin: 0;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    transition: transform 0.2s ease, box-shadow 0.2s ease;
                    border-radius: 12px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                    padding: 24px 20px 18px 20px;
                    text-align: left;
                  }
                  .deploy-card.deploy-yes {
                    background: #9FC87E;
                  }
                  .deploy-card.deploy-no {
                    background: #FF3F33;
                  }
                  .deploy-card h1 {
                    font-size: 24px;
                    margin: 0 0 16px;
                    line-height: 1.3;
                    color: #FFE6E1;
                  }
                  .deploy-message {
                    font-size: 20px;
                    font-weight: 600;
                    margin: 12px 0 8px 0;
                    color: #232634;
                  }
                  .deploy-date {
                    font-size: 14px;
                    color: #232634;
                    margin-bottom: 4px;
                  }
                  .deploy-tz {
                    font-size: 13px;
                    color: #075B5E;
                  }
                  @media (max-width: 600px) {
                    .deploy-card {
                      padding: 16px;
                    }
                    .deploy-card h1 {
                      font-size: 20px;
                    }
                    .deploy-message {
                      font-size: 16px;
                    }
                  }
                </style>
                <h1>Should I deploy today?</h1>
                <div class="deploy-message">{{ .JSON.String "message" }}</div>
                <div class="deploy-tz">Timezone: {{ .JSON.String "timezone" }}</div>
              </div>